<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Play2Play</title>
    <link rel="stylesheet" href="../css/global.css">
    <link rel="stylesheet" href="../css/index.css">
    <link rel="stylesheet" href="../css/leaderboards.css">
</head>

<body>
    <script src="../js/user-tracker.js"></script>
    <script>
        // Redirect to auth if not logged in
        const session = getSession();
        if (!session || Date.now() > session.expires) {
            window.location.href = "../html/auth.html";
        }
    </script>
    <embed src="../html/components/header.html" style="width: 100%; border: 0; height: 80px;">

    <main>
        <!-- User Stats -->
        <section class="stats-section">
            <div class="container">
                <header class="section-header">
                    <h2>Your Statistics</h2>
                    <p class="section-subtitle">
                        Track your progress and achievements
                    </p>
                </header>

                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">üéÆ</div>
                        <div class="stat-info">
                            <span class="stat-value" id="stat-total-games">0</span>
                            <span class="stat-label">Games Played</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">‚è±Ô∏è</div>
                        <div class="stat-info">
                            <span class="stat-value" id="stat-total-time">0s</span>
                            <span class="stat-label">Total Playtime</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üéØ</div>
                        <div class="stat-info">
                            <span class="stat-value" id="stat-game1-best">0</span>
                            <span class="stat-label">Best Score (Game 1)</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">ü¶Ö</div>
                        <div class="stat-info">
                            <span class="stat-value" id="stat-game2-best">0</span>
                            <span class="stat-label">Best Score (Game 2)</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Games Section -->
        <section id="games" class="games-section">
            <div class="container">
                <header class="section-header">
                    <h2>Games</h2>
                    <p class="section-subtitle">
                        Choose a game. Two are ready, the rest are still in development.
                    </p>
                </header>

                <div class="games-grid">
                    <article class="game-card">
                        <h3>Game 1 - Click Targets</h3>
                        <p>Test your reflexes! Click targets before they disappear.</p>
                        <a href="../html/game-1.html" class="btn primary-btn">Play</a>
                    </article>

                    <article class="game-card">
                        <h3>Game 2 - Flappy Bird</h3>
                        <p>Navigate through pipes and reach the highest level!</p>
                        <a href="../html/game-2.html" class="btn primary-btn">Play</a>
                    </article>

                    <article class="game-card game-card-disabled">
                        <h3>Game 3</h3>
                        <p>Coming soon.</p>
                        <a href="../html/game-placeholder.html" class="btn ghost-btn">In Development</a>
                    </article>

                    <article class="game-card game-card-disabled">
                        <h3>Game 4</h3>
                        <p>Coming soon.</p>
                        <a href="../html/game-placeholder.html" class="btn ghost-btn">In Development</a>
                    </article>
                </div>
            </div>
        </section>

        <!-- Leaderboard Section -->
        <section class="leaderboard-section">
            <div class="container">
                <header class="section-header">
                    <h2>Leaderboards</h2>
                    <p class="section-subtitle">
                        Top scores from all players
                    </p>
                </header>

                <div class="leaderboard-card">
                    <div class="leaderboard-header-row">
                        <div>
                            <h3 id="lb-game-title">Game 1 - High Scores</h3>
                            <p id="lb-game-description" class="lb-subtitle">
                                Top runs from all users.
                            </p>
                        </div>

                        <div class="leaderboard-controls">
                            <label for="game-select">Choose Game</label>
                            <select id="game-select">
                                <option value="game_1">Game 1</option>
                                <option value="game_2">Game 2</option>
                            </select>
                        </div>
                    </div>

                    <div class="table-wrapper">
                        <table class="score-table">
                            <thead>
                                <tr>
                                    <th>#</th>
                                    <th>User</th>
                                    <th>Score</th>
                                    <th>Date</th>
                                </tr>
                            </thead>
                            <tbody id="leaderboard-body">
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </section>

        <!-- Recent Activity Section -->
        <section class="activity-section">
            <div class="container">
                <header class="section-header">
                    <h2>Recent Activity</h2>
                    <p class="section-subtitle">
                        Your latest gaming sessions
                    </p>
                </header>

                <div class="activity-card">
                    <div class="activity-list" id="activity-list">
                    </div>
                </div>
            </div>
        </section>
    </main>

    <embed src="../html/components/footer.html" style="width: 100%; border: 0; height: 80px;">

    <script src="../js/user-tracker.js"></script>
    <script src="../js/leaderboards.js"></script>
    <script src="../js/dashboard.js"></script>
</body>

</html>